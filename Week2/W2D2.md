# Java 8 Features

Java 8 implemented many new and useful features including:
- Functional Interfaces
- Lambda Expressions
- Stream API
- Reflections API
- Date and Time API
- Optional Classes
- Predicates

# Functional Interfaces and Lambdas

Functional interfaces are interfaces with only one abstract method

- Implicitily be created by lambdas
- Can explicitly create them to be used by lambdas

Lambdas are possibly the biggest addition to Java 8, they introduce important aspects of functional programing, allow for disembodied methods, aka functions

The basic syntax for lambdas `parameters(s) -> expression`

For multiple parameters you will need to wrap them in parenthesis, for multiple lines of logic you will need curly braces

The return keyword is optional

# Default keyword for interfaces

Java 8 assed the ability for developers to add implementations to methods inside of an interface

If you use the keyword `default` in and interface, you can implement a method of said interface

# Introduction to Javalin

We are going to use Javalin to turn our java applications into a webservice

Javalin is a lightweight web framework for Java and Kotlin

It allows us to create a webservice, and allow users to send and receive data from our service without having to configure servlets
- Servlets are the underlying technology used with Java to handle HTTP requests, and send HTTP responses

Java runs on an embedded Jetty Server, so we don't have to fumble around with configuring out own Tomcat servers

You will see a heavy use of lambdas in Javalin

To use Javalin you will need to add the dependencies to our build.gradle
- Javalin
- slf4j
- Jackson Databind

Then to get started with Javalin, you just need to create a new Javalin Object, in the main method with any configurations, then run the .start() method, with a port number

java
```
Javalin app = Javalin.create(config -> {});
app.start(8000);
```

After you have created the Javalin app, you can start setting up your RESTful endpoint

## HTTP Handlers
the handler is a functional interface that should take in a Context Object (ctx) as parameter
- The Context Object is an abstraction of the HttpServletRequest and HttpServletResponse objects

To setup a handler, you simply use (Javalin app)dot whatever HTTP verb you want to watch for, and give it the logic to handle the request, along with the uri/endpoint to the resource

Examples of setting up handlers:


```java
app.get("/path", <lambdaexpression>);
app.get("/path", (ctx) -> {logic});
app.get("/path", implentation function);
//The routes would look like this:
// /path/subpath
app.routes( () -> {
    path("/path", () ->d {
        get("/subpath", implementation from controller);
        post("/subpath", implentation from controller);
    })
});
```

# PostMan

Postman is a very useful application that allows us to send HTTP Requests to servers, and nicely view the HTTP responses sent back

We will be using to manually test our API endpoints, and you will be using it to show the functionality of your P0

It is highly recommended to get very familiar with this tool and all of its features moving forward, because you will be using it a lot

# JSON (Javascript Object Notation)

JSON is a data exchange format that is easily read by humans and computers

String format that represents objects in key value pairs

Syntax:

```json
{
    "key": "value1",
    "key2": "value2"
}
```
- {} represent an object
- Key: the fields of the object
- Values: the fields values
- [{},{},{}] arrays to send multiple objects

## Why JSON
1. This makes nice and easy for our frontend to convert the objects
2. Our api's are going to be consumed by a client application (HTML/CSS/Javascript)
3. Javascript is virtually the ONLY viable option for a power, popular Client Side Programming

# Serialization via Jackson

The Jackson API is used to convery Java objects into JSON format to send in an HTTP response, and to convert the JSON sent from HTTP requests back into Java objects

Use ObjectMapper.writeValue() method to convert from Java to JSON

Use ObjectMapper.readValue() method to convert from JSON to Java

# Keep Track of which user is using our app

We can do this with HTTP Session API

Http Session API is a way to identify a user and store information about them based on their HTTP requests

Sessions require that you be hosting your website

You can manage these sessions nicely (kinda) with Javalin

1. Can use the context object from the http hander to create a key/value session pair
    - `context.req.getSesstion().setAttribute(key, value);`
2. You can retrieve the session attributes with:
    - `context.req.getSession().sessionAttribute(key)`
    - if it does not exist it will be null
3. You can remove a session attribute/invalidate the session:
    - `context.req.getSession().invalidate()`

One other things to note .getSession method will create a new session if one does not exist


